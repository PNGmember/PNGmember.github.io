<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è°ƒè¯•é¡µé¢ - ç´«å¤œå…¬ä¼š</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            font-weight: bold;
        }
        .success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
        }
        .error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
        }
        .info {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
        }
        button {
            background: rgba(124, 58, 237, 0.8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: rgba(124, 58, 237, 1);
        }
        .logo {
            width: 64px;
            height: 64px;
            margin: 20px auto;
            display: block;
            border-radius: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ç´«å¤œå…¬ä¼š - è°ƒè¯•é¡µé¢</h1>
        
        <img src="/purple-night-logo.png" alt="ç´«å¤œå…¬ä¼š" class="logo" onerror="this.style.display='none'">
        
        <div class="info">
            <strong>ğŸ“ å½“å‰é¡µé¢:</strong> debug.html<br>
            <strong>ğŸŒ è®¿é—®åœ°å€:</strong> <span id="currentUrl"></span><br>
            <strong>â° åŠ è½½æ—¶é—´:</strong> <span id="loadTime"></span>
        </div>
        
        <h2>ğŸ§ª åŸºç¡€åŠŸèƒ½æµ‹è¯•</h2>
        
        <div id="jsTest" class="status">
            <strong>JavaScript:</strong> <span id="jsStatus">æ£€æµ‹ä¸­...</span>
        </div>
        
        <div id="fetchTest" class="status">
            <strong>ç½‘ç»œè¯·æ±‚:</strong> <span id="fetchStatus">æ£€æµ‹ä¸­...</span>
        </div>
        
        <div id="storageTest" class="status">
            <strong>æœ¬åœ°å­˜å‚¨:</strong> <span id="storageStatus">æ£€æµ‹ä¸­...</span>
        </div>
        
        <div id="reactTest" class="status">
            <strong>Reactç¯å¢ƒ:</strong> <span id="reactStatus">æ£€æµ‹ä¸­...</span>
        </div>
        
        <h2>ğŸ”— å¿«é€Ÿé“¾æ¥</h2>
        <button onclick="window.location.href='/'">è¿”å›ä¸»é¡µ</button>
        <button onclick="window.location.href='/login'">ç™»å½•é¡µé¢</button>
        <button onclick="window.location.href='/admin'">ç®¡ç†åå°</button>
        <button onclick="window.location.href='/test-logo.html'">Logoæµ‹è¯•</button>
        
        <h2>ğŸ“Š ç¯å¢ƒä¿¡æ¯</h2>
        <div class="info">
            <strong>æµè§ˆå™¨:</strong> <span id="userAgent"></span><br>
            <strong>å±å¹•åˆ†è¾¨ç‡:</strong> <span id="screenSize"></span><br>
            <strong>è§†å£å¤§å°:</strong> <span id="viewportSize"></span><br>
            <strong>æ—¶åŒº:</strong> <span id="timezone"></span>
        </div>
        
        <h2>ğŸ› ï¸ è°ƒè¯•å·¥å…·</h2>
        <button onclick="testMainApp()">æµ‹è¯•ä¸»åº”ç”¨</button>
        <button onclick="clearStorage()">æ¸…é™¤ç¼“å­˜</button>
        <button onclick="showConsoleLog()">æ˜¾ç¤ºæ§åˆ¶å°</button>
        
        <div id="debugOutput" style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; font-family: monospace; font-size: 12px; white-space: pre-wrap; display: none;"></div>
    </div>

    <script>
        // è®°å½•åŠ è½½æ—¶é—´
        const loadTime = Date.now();
        
        // åŸºç¡€ä¿¡æ¯æ˜¾ç¤º
        document.getElementById('currentUrl').textContent = window.location.href;
        document.getElementById('loadTime').textContent = new Date().toLocaleString();
        document.getElementById('userAgent').textContent = navigator.userAgent;
        document.getElementById('screenSize').textContent = `${screen.width}x${screen.height}`;
        document.getElementById('viewportSize').textContent = `${window.innerWidth}x${window.innerHeight}`;
        document.getElementById('timezone').textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;
        
        // JavaScriptæµ‹è¯•
        function testJavaScript() {
            try {
                const test = [1, 2, 3].map(x => x * 2);
                document.getElementById('jsStatus').textContent = 'âœ… æ­£å¸¸';
                document.getElementById('jsTest').className = 'status success';
                return true;
            } catch (error) {
                document.getElementById('jsStatus').textContent = 'âŒ é”™è¯¯: ' + error.message;
                document.getElementById('jsTest').className = 'status error';
                return false;
            }
        }
        
        // ç½‘ç»œè¯·æ±‚æµ‹è¯•
        async function testFetch() {
            try {
                const response = await fetch('/purple-night-logo.png');
                if (response.ok) {
                    document.getElementById('fetchStatus').textContent = 'âœ… æ­£å¸¸';
                    document.getElementById('fetchTest').className = 'status success';
                } else {
                    document.getElementById('fetchStatus').textContent = 'âŒ HTTP ' + response.status;
                    document.getElementById('fetchTest').className = 'status error';
                }
            } catch (error) {
                document.getElementById('fetchStatus').textContent = 'âŒ é”™è¯¯: ' + error.message;
                document.getElementById('fetchTest').className = 'status error';
            }
        }
        
        // æœ¬åœ°å­˜å‚¨æµ‹è¯•
        function testStorage() {
            try {
                localStorage.setItem('test', 'value');
                const value = localStorage.getItem('test');
                localStorage.removeItem('test');
                
                if (value === 'value') {
                    document.getElementById('storageStatus').textContent = 'âœ… æ­£å¸¸';
                    document.getElementById('storageTest').className = 'status success';
                } else {
                    document.getElementById('storageStatus').textContent = 'âŒ è¯»å†™å¤±è´¥';
                    document.getElementById('storageTest').className = 'status error';
                }
            } catch (error) {
                document.getElementById('storageStatus').textContent = 'âŒ é”™è¯¯: ' + error.message;
                document.getElementById('storageTest').className = 'status error';
            }
        }
        
        // Reactç¯å¢ƒæµ‹è¯•
        function testReact() {
            if (typeof React !== 'undefined') {
                document.getElementById('reactStatus').textContent = 'âœ… Reactå·²åŠ è½½';
                document.getElementById('reactTest').className = 'status success';
            } else {
                document.getElementById('reactStatus').textContent = 'âŒ ReactæœªåŠ è½½';
                document.getElementById('reactTest').className = 'status error';
            }
        }
        
        // æµ‹è¯•ä¸»åº”ç”¨
        function testMainApp() {
            const output = document.getElementById('debugOutput');
            output.style.display = 'block';
            output.textContent = 'æ­£åœ¨æµ‹è¯•ä¸»åº”ç”¨...\n';
            
            // æ£€æŸ¥ä¸»é¡µé¢çš„HTMLç»“æ„
            fetch('/')
                .then(response => response.text())
                .then(html => {
                    output.textContent += 'ä¸»é¡µHTMLåŠ è½½æˆåŠŸ\n';
                    output.textContent += `HTMLé•¿åº¦: ${html.length} å­—ç¬¦\n`;
                    
                    if (html.includes('<div id="root">')) {
                        output.textContent += 'âœ… Reactæ ¹å…ƒç´ å­˜åœ¨\n';
                    } else {
                        output.textContent += 'âŒ Reactæ ¹å…ƒç´ ç¼ºå¤±\n';
                    }
                    
                    // æ£€æŸ¥JavaScriptæ–‡ä»¶
                    const scriptMatch = html.match(/src="([^"]+\.js[^"]*)"/);
                    if (scriptMatch) {
                        const scriptUrl = scriptMatch[1];
                        output.textContent += `JavaScriptæ–‡ä»¶: ${scriptUrl}\n`;
                        
                        fetch(scriptUrl)
                            .then(response => {
                                if (response.ok) {
                                    output.textContent += 'âœ… JavaScriptæ–‡ä»¶å¯è®¿é—®\n';
                                } else {
                                    output.textContent += `âŒ JavaScriptæ–‡ä»¶è®¿é—®å¤±è´¥: ${response.status}\n`;
                                }
                            })
                            .catch(error => {
                                output.textContent += `âŒ JavaScriptæ–‡ä»¶åŠ è½½é”™è¯¯: ${error.message}\n`;
                            });
                    }
                })
                .catch(error => {
                    output.textContent += `âŒ ä¸»é¡µåŠ è½½å¤±è´¥: ${error.message}\n`;
                });
        }
        
        // æ¸…é™¤ç¼“å­˜
        function clearStorage() {
            localStorage.clear();
            sessionStorage.clear();
            alert('ç¼“å­˜å·²æ¸…é™¤ï¼Œå»ºè®®åˆ·æ–°é¡µé¢');
        }
        
        // æ˜¾ç¤ºæ§åˆ¶å°
        function showConsoleLog() {
            alert('è¯·æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°ä¿¡æ¯');
        }
        
        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(() => {
                testJavaScript();
                testFetch();
                testStorage();
                testReact();
            }, 100);
        });
        
        // é”™è¯¯æ•è·
        window.addEventListener('error', (event) => {
            console.error('é¡µé¢é”™è¯¯:', event.error);
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason);
        });
    </script>
</body>
</html>
